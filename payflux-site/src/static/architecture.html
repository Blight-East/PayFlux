<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture | PayFlux</title>
    <meta name="description" content="PayFlux system architecture: ingest pipeline, risk scoring engine, Redis streams, evidence generation, and API layer.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>body{font-family:'Inter',sans-serif;background-color:#0a0c10;color:#cbd5e1;}</style>
</head>
<body class="selection:bg-indigo-500/30">
    <nav class="fixed top-0 w-full z-50 border-b border-white/5 bg-[#0a0c10]/80 backdrop-blur-xl h-16">
        <div class="max-w-7xl mx-auto px-6 h-full flex items-center justify-between">
            <a href="/" class="flex items-center gap-3 no-underline"><div class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-slate-600 rounded-sm"></div><span class="text-white font-bold tracking-tight text-xl">PayFlux</span></a>
            <a href="/" class="text-[11px] font-bold uppercase tracking-[0.2em] text-slate-400 hover:text-white transition-colors no-underline">← Back to Home</a>
        </div>
    </nav>
    <main class="max-w-3xl mx-auto px-6 pt-32 pb-20">
        <div class="mb-12 border-b border-white/5 pb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-white tracking-tight mb-6">Architecture</h1>
            <p class="text-lg text-slate-400 leading-relaxed">How PayFlux ingests payment events, scores risk in real time, and surfaces actionable intelligence through a layered pipeline architecture.</p>
        </div>
        <div class="space-y-12 text-slate-400 leading-relaxed">
            <section>
                <h2 class="text-2xl font-bold text-white mb-4">Ingest Pipeline</h2>
                <p class="mb-4">Payment events enter PayFlux through a high-throughput HTTP ingest endpoint. Events are validated, normalized, and written to a Redis Stream for durable, ordered processing. The ingest layer handles backpressure through configurable rate limiting (token bucket) and supports burst absorption up to 500 events/second per tenant.</p>
                <p class="mb-4">Each event includes: event type, timestamp, hashed merchant ID, hashed payment intent ID, processor identifier, failure category, retry count, geo bucket, amount bucket, and payment method classification. No raw PII enters the system.</p>
            </section>
            <section>
                <h2 class="text-2xl font-bold text-white mb-4">Risk Scoring Engine</h2>
                <p class="mb-4">Consumer workers read from the Redis Stream using consumer groups for parallel, fault-tolerant processing. Each event is evaluated against configurable risk scoring thresholds that map to processor risk models. Scoring is fully deterministic — given the same inputs, the same score is always produced.</p>
                <p class="mb-4">Risk scores are bucketed into bands (low, elevated, high, critical) with configurable thresholds. The scoring window is rolling (default 300 seconds) and considers velocity, geographic distribution, retry intensity, and failure pattern analysis.</p>
            </section>
            <section>
                <h2 class="text-2xl font-bold text-white mb-4">Evidence Generation</h2>
                <p class="mb-4">When risk signals exceed configured thresholds, PayFlux generates evidence narratives — structured explanations that document what was detected, why it matters from a processor perspective, and what remediation steps are recommended. These narratives are designed to be shared directly with processor risk teams.</p>
            </section>
            <section>
                <h2 class="text-2xl font-bold text-white mb-4">Dashboard and API Layer</h2>
                <p class="mb-4">The Next.js dashboard provides real-time visualization of risk signals, trend analysis, and evidence export. The REST API supports programmatic access for integration with existing payment operations tooling. Authentication uses Clerk for dashboard access and API keys for programmatic access, with tenant isolation at every layer.</p>
            </section>
        </div>
    </main>
    <footer class="border-t border-white/5 py-12"><div class="max-w-7xl mx-auto px-6 text-center"><p class="text-slate-500 text-sm">© 2026 PayFlux. All rights reserved.</p></div></footer>
</body>
</html>
